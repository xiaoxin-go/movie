{"version":3,"sources":["webpack:///src/components/Index.vue","webpack:///./src/components/Index.vue?e759","webpack:///./src/components/Index.vue"],"names":["Index","data","total","page_size","data_list","loading","id_list","components","computed","page","console","log","this","$route","params","bid","created","keyword","getData","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","jsonData","resp","wrap","_context","prev","next","Object","api","sent","stop","delData","_this2","_callee2","json_data","_context2","Array","state","$Message","success","warning","addMoviecol","id","_this3","_callee3","_context3","show","title","name","split","$router","push","path","seturl","Math","random","settitle","slice","join","settext","changePage","index","changePagesize","components_Index","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","size","fix","_e","_v","model","value","callback","$$v","expression","_l","on","click","$event","staticStyle","width","height","src","alt","_s","info","label","margin","padding","$formatDate","release_time","position","top","left","z-index","variant","margin-bottom","current","page-size","page-size-opts","show-elevator","show-sizer","on-change","on-page-size-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.4b2cbc3502d1cc49784a.js","sourcesContent":["<template>\n  <div class=\"main\">\n    <Spin size=\"large\" fix v-if=\"loading\"></Spin>\n    <div class=\"index-body\">\n      <div>\n        <CheckboxGroup v-model=\"id_list\">\n        <div class=\"index-item\" v-for=\"(data, index) in data_list\">\n            <div class=\"item-img\" @click=\"show(data.title)\">\n              <div style=\"width: 315.3px;height: 212.3px;\">\n                <img style=\"height: 212.3px;width: 315.3px;\" :src=\"seturl(data.title)\" :alt=\"data.title\">\n              </div>\n\n            </div>\n            <div class=\"item-text\">\n              <div class=\"item-text-title\">{{data.info}}</div>\n              <div class=\"item-text-name\">\n                <Checkbox :label=\"data.id\"><span style=\"margin: 0;padding: 0;\"></span></Checkbox>\n                {{settext(data.title)}}/{{$formatDate(data.release_time)}}\n                <Button @click=\"addMoviecol(data.id)\" size=\"small\">收藏</Button>\n              </div>\n\n\n            </div>\n        </div>\n        </CheckboxGroup>\n      </div>\n      <div style=\"position: absolute;top:16px;left: 500px;width: 60px;z-index:2000\">\n        <b-button size=\"sm\" variant=\"primary\" @click=\"delData\">删除</b-button>\n      </div>\n\n    </div>\n    <Page style=\"margin-bottom: 25px;\" :total=\"total\" :current=\"page\" :page-size=\"page_size\" :page-size-opts=\"[20,50,100,200,500]\" @on-change=\"changePage\" @on-page-size-change=\"changePagesize\" show-elevator show-sizer />\n\n  </div>\n</template>\n\n<script>\n  import {getMovie, delMovie, addMoviecol} from '../api/index.js';\n    export default {\n      data(){\n        return{\n        total:0,          // 总条数\n          page_size:100,      // 每页条数\n          //page:this.page ,            // 当前页\n          data_list: [],     // 标签列表\n          loading:true,\n          id_list: [],\n      }\n    },\n      components:{\n      },\n      computed:{\n        page() {\n          console.log(this.$route.params.bid);\n          return this.$route.params.bid || 1\n        },\n      },\n      created(){\n        console.log(this.keyword);\n        this.getData()\n      },\n      methods: {\n        async getData() {\n          this.loading = true;\n          let jsonData = {\n            page: this.page,\n            page_size: this.page_size,\n            total: this.total,\n          };\n          let resp = await getMovie(jsonData);\n          this.total = resp.total;\n          console.log(resp);\n          if (this.total > 0) {\n            this.data_list = resp.data;\n          }\n          this.loading = false\n        },\n        // 删除数据\n        async delData(){\n          console.log(Array(this.id_list));\n          let json_data = {\n            id_list: Array(this.id_list),\n          };\n          let resp = await delMovie(json_data);\n          if (resp.state === 1){\n            this.$Message.success('删除成功')\n          }else{\n            this.$Message.warning('删除失败')\n          }\n          this.id_list = [];\n          this.getData();\n        },\n\n        // 添加收藏\n        async addMoviecol(id){\n          let resp = await addMoviecol({id:id});\n          if(resp.state === 0){\n            this.$Message.warning('用户未登录')\n          }else if(resp.state === 1){\n            this.$Message.success('收藏成功')\n          }else{\n            this.$Message.success('收藏失败')\n          }\n        },\n\n        show(title){\n          let name = title.split(' ')[0];\n          this.$router.push({path:`/${name}`})\n        },\n\n        seturl(title){\n          title = title.split(' ')[0];\n          return '/static/image/movie/' + title + '/' + title + '.jpg?' + Math.random()\n        },\n        settitle(title){\n          title = title.split(' ').slice(1,).join(' ');\n          return title\n        },\n        settext(title){\n          title = title.split(' ')[0];\n          return title\n        },\n        // 改变页数\n        /*changePage(index){\n          this.page = index;\n          console.log('page:',this.page);\n          this.getData();\n        },*/\n        changePage(index){\n          this.$router.push(`/page/${index}`);\n          this.getData()\n        },\n\n        // 改变每页显示的条数\n        changePagesize(index){\n          this.page_size = index;\n          console.log('page_size:',this.page_size);\n          this.getData();\n        }\n      }\n    }\n</script>\n\n<style>\n  .index-item{\n    display: inline-block;\n    margin: 10px;\n    width: 324px;\n    background: #fafafa;\n    padding-bottom: 5px;\n    box-shadow: 0 1px 3px rgba(0,0,0,.3);\n  }\n  .item-text{\n    font-size: 14px;\n    color: #000;\n  }\n  .item-text-title{\n    height: 40px;\n    overflow: hidden;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[(_vm.loading)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"index-body\"},[_c('div',[_c('CheckboxGroup',{model:{value:(_vm.id_list),callback:function ($$v) {_vm.id_list=$$v},expression:\"id_list\"}},_vm._l((_vm.data_list),function(data,index){return _c('div',{staticClass:\"index-item\"},[_c('div',{staticClass:\"item-img\",on:{\"click\":function($event){_vm.show(data.title)}}},[_c('div',{staticStyle:{\"width\":\"315.3px\",\"height\":\"212.3px\"}},[_c('img',{staticStyle:{\"height\":\"212.3px\",\"width\":\"315.3px\"},attrs:{\"src\":_vm.seturl(data.title),\"alt\":data.title}})])]),_vm._v(\" \"),_c('div',{staticClass:\"item-text\"},[_c('div',{staticClass:\"item-text-title\"},[_vm._v(_vm._s(data.info))]),_vm._v(\" \"),_c('div',{staticClass:\"item-text-name\"},[_c('Checkbox',{attrs:{\"label\":data.id}},[_c('span',{staticStyle:{\"margin\":\"0\",\"padding\":\"0\"}})]),_vm._v(\"\\n              \"+_vm._s(_vm.settext(data.title))+\"/\"+_vm._s(_vm.$formatDate(data.release_time))+\"\\n              \"),_c('Button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.addMoviecol(data.id)}}},[_vm._v(\"收藏\")])],1)])])}))],1),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"16px\",\"left\":\"500px\",\"width\":\"60px\",\"z-index\":\"2000\"}},[_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"primary\"},on:{\"click\":_vm.delData}},[_vm._v(\"删除\")])],1)]),_vm._v(\" \"),_c('Page',{staticStyle:{\"margin-bottom\":\"25px\"},attrs:{\"total\":_vm.total,\"current\":_vm.page,\"page-size\":_vm.page_size,\"page-size-opts\":[20,50,100,200,500],\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.changePagesize}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-672cd9a3\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-672cd9a3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-672cd9a3\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}