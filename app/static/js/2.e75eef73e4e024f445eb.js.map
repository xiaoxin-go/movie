{"version":3,"sources":["webpack:///src/components/Moviecol.vue","webpack:///./src/components/Moviecol.vue?04d6","webpack:///./src/components/Moviecol.vue"],"names":["Moviecol","data","total","page_size","page","data_list","loading","ids","username","Object","cookie","components","computed","get_page","this","$route","params","bid","parseInt","created","console","log","keyword","getData","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","jsonData","resp","wrap","_context","prev","next","api","sent","stop","delData","id","_this2","_callee2","_context2","state","$Message","success","warning","show","title","name","split","$router","push","path","seturl","$global","server_ip","Math","random","settitle","slice","join","settext","changePage","index","changePagesize","watch","to","from","components_Moviecol","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","size","fix","_e","_v","_l","on","click","$event","staticStyle","height","width","src","alt","_s","info","$formatDate","release_time","margin-left","margin-bottom","current","page-size","page-size-opts","show-total","show-elevator","show-sizer","on-change","on-page-size-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/2.e75eef73e4e024f445eb.js","sourcesContent":["<template>\n  <div class=\"main\">\n    <Spin size=\"large\" fix v-if=\"loading\"></Spin>\n    <div class=\"index-body\">\n      <div>\n        <div class=\"index-item\" v-for=\"(data, index) in data_list\">\n            <div class=\"item-img\" @click=\"show(data.title)\">\n              <img style=\"height: 212.3px;width: 315.3px;\" :src=\"seturl(data.title)\" :alt=\"data.title\">\n            </div>\n            <div class=\"item-text\">\n              <div class=\"item-text-title\">{{data.info}}</div>\n              <div class=\"item-text-name\">{{settext(data.title)}}/{{$formatDate(data.release_time)}}\n                <Button @click=\"delData(data.id)\" size=\"small\" style=\"margin-left: 5px;\">取消收藏</Button>\n              </div>\n\n            </div>\n        </div>\n      </div>\n    </div>\n    <Page style=\"margin-bottom: 25px;\" :total=\"total\" :current=\"page\" :page-size=\"page_size\" :page-size-opts=\"[20,50,100,200,500]\" @on-change=\"changePage\" @on-page-size-change=\"changePagesize\" show-total show-elevator show-sizer />\n\n  </div>\n</template>\n\n<script>\n  import {getMoviecol, delMoviecol} from '../api/index.js';\n  import {getCookie} from \"../assets/js/cookie\";\n    export default {\n      data(){\n        return{\n        total:0,          // 总条数\n          page_size:100,      // 每页条数\n          page:1,\n          data_list: [],     // 标签列表\n          loading:true,\n          ids:[],\n          username: getCookie('username')\n      }\n    },\n      components:{\n      },\n      computed:{\n        get_page() {\n          let page = this.$route.params.bid;\n          if(page){\n            return parseInt(page);\n          }\n          return 1\n        },\n      },\n      created(){\n        console.log(this.keyword);\n        this.getData()\n      },\n      methods: {\n        async getData() {\n          let jsonData = {\n            page: this.page,\n            page_size: this.page_size,\n            total: this.total,\n            username: this.username\n          };\n          let resp = await getMoviecol(jsonData);\n          this.total = resp.total;\n          console.log(resp);\n          if (this.total > 0) {\n            this.data_list = resp.data;\n          }\n          this.loading = false\n        },\n\n        async delData(id ){\n          //let id = this.data_list[index].id;\n          let resp = await delMoviecol({id:id, username: this.username});\n          if (resp.state === 1){\n            //this.data_list.splice(index, 1);    // 从原数组中移除\n            //this.total -= 1;\n            this.$Message.success('取消收藏成功')\n          }else if(resp.state === 0){\n            this.$Message.warning('请先登录')\n          }else{\n            this.$Message.warning('取消收藏失败')\n          }\n          this.getData();\n        },\n\n        show(title){\n          let name = title.split(' ')[0];\n          this.$router.push({path:`/${name}`})\n        },\n\n        seturl(title){\n          title = title.split(' ')[0];\n          return this.$global.server_ip + '/image/movie/' + title + '/' + title + '.jpg?' + Math.random()\n        },\n        settitle(title){\n          title = title.split(' ').slice(1,).join(' ');\n          return title\n        },\n        settext(title){\n          title = title.split(' ')[0];\n          return title\n        },\n        // 改变页数\n        /*changePage(index){\n          this.page = index;\n          console.log('page:',this.page);\n          this.getData();\n        },*/\n        changePage(index){\n          this.$router.push(`/moviecol/${index}`)\n        },\n\n        // 改变每页显示的条数\n        changePagesize(index){\n          this.page_size = index;\n          console.log('page_size:',this.page_size);\n          this.getData();\n        }\n      },\n      watch:{\n        \"$route\":function(to, from){\n          if(this.page !== this.get_page){\n            this.page = this.get_page;\n          }\n          this.getData();\n        }\n      }\n    }\n</script>\n\n<style>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Moviecol.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[(_vm.loading)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"index-body\"},[_c('div',_vm._l((_vm.data_list),function(data,index){return _c('div',{staticClass:\"index-item\"},[_c('div',{staticClass:\"item-img\",on:{\"click\":function($event){_vm.show(data.title)}}},[_c('img',{staticStyle:{\"height\":\"212.3px\",\"width\":\"315.3px\"},attrs:{\"src\":_vm.seturl(data.title),\"alt\":data.title}})]),_vm._v(\" \"),_c('div',{staticClass:\"item-text\"},[_c('div',{staticClass:\"item-text-title\"},[_vm._v(_vm._s(data.info))]),_vm._v(\" \"),_c('div',{staticClass:\"item-text-name\"},[_vm._v(_vm._s(_vm.settext(data.title))+\"/\"+_vm._s(_vm.$formatDate(data.release_time))+\"\\n              \"),_c('Button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.delData(data.id)}}},[_vm._v(\"取消收藏\")])],1)])])}))]),_vm._v(\" \"),_c('Page',{staticStyle:{\"margin-bottom\":\"25px\"},attrs:{\"total\":_vm.total,\"current\":_vm.page,\"page-size\":_vm.page_size,\"page-size-opts\":[20,50,100,200,500],\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.changePagesize}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b04e83da\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Moviecol.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b04e83da\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Moviecol.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Moviecol.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Moviecol.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b04e83da\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Moviecol.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Moviecol.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}