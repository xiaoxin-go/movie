webpackJsonp([0],{PGk0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),i=s.n(a),n=s("exGp"),r=s.n(n),c=s("gyMJ"),o=s("L/O1"),l={data:function(){return{total:0,page_size:20,data_list:[],loading:!0,id_list:[],username:Object(o.b)("username")}},components:{},computed:{get_page:function(){var t=this.$route.params.page;return t?parseInt(t):1},series:function(){return this.$route.params.bid}},created:function(){this.getData()},methods:{getData:function(){var t=this;return r()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={page:t.get_page,page_size:t.page_size,data:{series:t.series},total:t.total},e.next=3,Object(c.j)(s);case 3:a=e.sent,t.total=a.total,console.log(a),t.total>0&&(t.data_list=a.data),t.loading=!1;case 8:case"end":return e.stop()}},e,t)}))()},delData:function(){var t=this;return r()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(Array(t.id_list)),0!==(s=t.id_list.length)){e.next=5;break}return t.$Message.warning("please select movie."),e.abrupt("return");case 5:return a={id_list:Array(t.id_list),username:t.username},e.next=8,Object(c.f)(a);case 8:1===e.sent.state?(t.total-=s,t.$Message.success("删除成功")):t.$Message.warning("删除失败"),t.id_list=[],t.getData();case 12:case"end":return e.stop()}},e,t)}))()},del:function(t,e){var s=this;return r()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(c.f)({id:e,username:s.username});case 2:1===a.sent.state?(s.data_list.splice(t,1),s.total-=1,s.$Message.success("删除成功")):s.$Message.warning("删除失败");case 4:case"end":return a.stop()}},a,s)}))()},addMoviecol:function(t){var e=this;return r()(i.a.mark(function s(){var a;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(c.c)({id:t});case 2:0===(a=s.sent).state?e.$Message.warning("用户未登录"):1===a.state?e.$Message.success("收藏成功"):e.$Message.success("收藏失败");case 4:case"end":return s.stop()}},s,e)}))()},show:function(t){var e=t.split(" ")[0];this.$router.push({path:"/"+e})},seturl:function(t){return t=t.split(" ")[0],this.server_ip+"/image/movie/"+t+"/"+t+".jpg?"+Math.random()},settitle:function(t){return t=t.split(" ").slice(1).join(" ")},settext:function(t){return t=t.split(" ")[0]},changeState:function(){var t=this;return r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.d)({id_list:t.id_list});case 2:1===e.sent.state?(t.$Message.success("设置成功"),t.id_list=[]):t.$Message.warning("设置失败");case 4:case"end":return e.stop()}},e,t)}))()},changePage:function(t){this.id_list=[],this.page=t,this.$router.push("/series/"+this.series+"/"+t)},changePagesize:function(t){this.page_size=t,console.log("page_size:",this.page_size),this.getData()}},watch:{$route:function(t,e){this.getData()}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[t.loading?s("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),s("div",{staticClass:"index-body"},[s("div",{staticStyle:{"text-align":"left",margin:"auto"}},[s("CheckboxGroup",{model:{value:t.id_list,callback:function(e){t.id_list=e},expression:"id_list"}},t._l(t.data_list,function(e,a){return s("div",{staticClass:"index-item"},[s("div",{staticClass:"item-img",on:{click:function(s){t.show(e.title)}}},[s("div",{staticStyle:{width:"315.3px",height:"212.3px"}},[s("img",{staticStyle:{height:"212.3px",width:"315.3px"},attrs:{src:t.seturl(e.title),alt:e.title}})])]),t._v(" "),s("div",{staticClass:"item-text"},[s("div",{staticClass:"item-text-title"},[t._v(t._s(e.info))]),t._v(" "),s("div",{staticClass:"item-text-name"},["xiaoxin"===t.username?s("Checkbox",{attrs:{label:e.id}},[s("span",{staticStyle:{margin:"0",padding:"0"}})]):t._e(),t._v("\n              "+t._s(t.settext(e.title))+"/"+t._s(t.$formatDate(e.release_time))+"\n              "),s("Button",{attrs:{size:"small"},on:{click:function(s){t.addMoviecol(e.id)}}},[t._v("收藏")]),t._v(" "),"xiaoxin"===t.username?s("Button",{attrs:{size:"small"},on:{click:function(s){t.del(a,e.id)}}},[t._v("删除")]):t._e()],1)])])}))],1),t._v(" "),"xiaoxin"===t.username?s("div",{staticStyle:{position:"fixed",top:"5px",left:"524px",width:"110px","z-index":"2000"}},[s("b-button",{attrs:{size:"sm"},on:{click:t.delData}},[t._v("删除")]),t._v(" "),s("b-button",{attrs:{size:"sm"},on:{click:t.changeState}},[t._v("更改")])],1):t._e()]),t._v(" "),s("Page",{staticStyle:{"margin-bottom":"25px"},attrs:{"show-total":"",total:t.total,current:t.get_page,"page-size":t.page_size,"page-size-opts":[20,50,100,200,500],"show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePagesize}})],1)},staticRenderFns:[]};var d=s("VU/8")(l,u,!1,function(t){s("v6yr")},null,null);e.default=d.exports},v6yr:function(t,e){}});
//# sourceMappingURL=0.512f269f7d1ffef96175.js.map